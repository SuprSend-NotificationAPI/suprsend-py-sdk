{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://github.com/suprsend/suprsend-py-sdk/request_schemas/workflow.json",
  "title": "workflow_request",
  "description": "Json schema for workflow request",
  "$comment": "Json schema for workflow request",
  "type": "object",
  "properties": {
    "provider_name": {
      "enum": [
        "twilio",
        "exotel",
        "generic"
      ]
    },
    "twilio": {
      "$ref": "#/definitions/twilio_sms_setting"
    },
    "exotel": {
      "$ref": "#/definitions/exotel_sms_setting"
    },
    "generic": {
      "$ref": "#/definitions/generic_sms_setting"
    }
  },
  "oneOf": [
    {
      "properties": {
        "provider_name": {
          "const": "twilio"
        }
      },
      "required": [
        "provider_name",
        "twilio"
      ]
    },
    {
      "properties": {
        "provider_name": {
          "const": "exotel"
        }
      },
      "required": [
        "provider_name",
        "exotel"
      ]
    },
    {
      "properties": {
        "provider_name": {
          "const": "generic"
        }
      },
      "required": [
        "provider_name",
        "generic"
      ]
    }
  ],
  "definitions": {
    "twilio_sms_setting": {
      "type": "object",
      "properties": {
        "account_sid": {
          "type": "string"
        },
        "auth_token": {
          "type": "string"
        },
        "using": {
          "enum": [
            "number",
            "service_sid"
          ]
        },
        "from_number": {
          "type": "string"
        },
        "service_sid": {
          "type": "string"
        }
      },
      "required": [
        "api_key",
        "api_secret",
        "using"
      ],
      "oneOf": [
        {
          "properties": {
            "using": {
              "const": "number"
            }
          },
          "required": [
            "number"
          ]
        },
        {
          "properties": {
            "using": {
              "const": "service_sid"
            }
          },
          "required": [
            "service_sid"
          ]
        }
      ],
      "additionalProperties": false
    }
  }
}
